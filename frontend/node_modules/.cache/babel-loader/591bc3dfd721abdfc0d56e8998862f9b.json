{"ast":null,"code":"var _jsxFileName = \"/Users/Enrick/desafio09/src/components/Form/DeliverymanInput/index.js\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport AsyncSelect from 'react-select/async';\nimport { useField } from '@unform/core';\nimport api from '../../../services/api';\nimport { Container, SelectField } from './styles';\nexport default function DeliverymanSelect({\n  name,\n  label,\n  placeholder,\n  loadOptions,\n  defaultOptions,\n  ...rest\n}) {\n  const [deliverymans, setDeliverymans] = useState([]);\n  const selectRef = useRef(null);\n  const {\n    registerField,\n    defaultValue,\n    fieldName\n  } = useField(name);\n  useEffect(() => {\n    async function loadData() {\n      const response = await api.get('/deliveryman');\n      const data = response.data.map(deliveryman => ({\n        value: deliveryman.id,\n        label: deliveryman.name\n      }));\n      setDeliverymans(data);\n    }\n\n    loadData();\n  }, []);\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: selectRef.current,\n      path: 'select.state.value',\n      getValue: ref => {\n        return ref.select.state.value.value;\n      }\n    });\n  }, [fieldName, registerField, rest.isMulti]);\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: selectRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, label), React.createElement(SelectField, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(AsyncSelect, Object.assign({\n    cacheOptions: true,\n    defaultOptions: deliverymans,\n    defaultValue: defaultValue,\n    ref: selectRef,\n    classNamePrefix: \"react-select\",\n    loadOptions: true,\n    placeholder: placeholder\n  }, rest, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }))));\n}","map":{"version":3,"sources":["/Users/Enrick/desafio09/src/components/Form/DeliverymanInput/index.js"],"names":["React","useState","useRef","useEffect","AsyncSelect","useField","api","Container","SelectField","DeliverymanSelect","name","label","placeholder","loadOptions","defaultOptions","rest","deliverymans","setDeliverymans","selectRef","registerField","defaultValue","fieldName","loadData","response","get","data","map","deliveryman","value","id","ref","current","path","getValue","select","state","isMulti"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,OAAOC,GAAP,MAAgB,uBAAhB;AAEA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,UAAvC;AAEA,eAAe,SAASC,iBAAT,CAA2B;AACxCC,EAAAA,IADwC;AAExCC,EAAAA,KAFwC;AAGxCC,EAAAA,WAHwC;AAIxCC,EAAAA,WAJwC;AAKxCC,EAAAA,cALwC;AAMxC,KAAGC;AANqC,CAA3B,EAOZ;AACD,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkChB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAMiB,SAAS,GAAGhB,MAAM,CAAC,IAAD,CAAxB;AACA,QAAM;AAAEiB,IAAAA,aAAF;AAAiBC,IAAAA,YAAjB;AAA+BC,IAAAA;AAA/B,MAA6ChB,QAAQ,CAACK,IAAD,CAA3D;AAEAP,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAemB,QAAf,GAA0B;AACxB,YAAMC,QAAQ,GAAG,MAAMjB,GAAG,CAACkB,GAAJ,CAAQ,cAAR,CAAvB;AAEA,YAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkBC,WAAW,KAAK;AAC7CC,QAAAA,KAAK,EAAED,WAAW,CAACE,EAD0B;AAE7ClB,QAAAA,KAAK,EAAEgB,WAAW,CAACjB;AAF0B,OAAL,CAA7B,CAAb;AAKAO,MAAAA,eAAe,CAACQ,IAAD,CAAf;AACD;;AAEDH,IAAAA,QAAQ;AACT,GAbQ,EAaN,EAbM,CAAT;AAeAnB,EAAAA,SAAS,CAAC,MAAM;AACdgB,IAAAA,aAAa,CAAC;AACZT,MAAAA,IAAI,EAAEW,SADM;AAEZS,MAAAA,GAAG,EAAEZ,SAAS,CAACa,OAFH;AAGZC,MAAAA,IAAI,EAAE,oBAHM;AAIZC,MAAAA,QAAQ,EAAEH,GAAG,IAAI;AACf,eAAOA,GAAG,CAACI,MAAJ,CAAWC,KAAX,CAAiBP,KAAjB,CAAuBA,KAA9B;AACD;AANW,KAAD,CAAb;AAQD,GATQ,EASN,CAACP,SAAD,EAAYF,aAAZ,EAA2BJ,IAAI,CAACqB,OAAhC,CATM,CAAT;AAWA,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAElB,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4BP,KAA5B,CADF,EAEE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,WAAD;AACE,IAAA,YAAY,MADd;AAEE,IAAA,cAAc,EAAEK,YAFlB;AAGE,IAAA,YAAY,EAAEI,YAHhB;AAIE,IAAA,GAAG,EAAEF,SAJP;AAKE,IAAA,eAAe,EAAC,cALlB;AAME,IAAA,WAAW,MANb;AAOE,IAAA,WAAW,EAAEN;AAPf,KAQMG,IARN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,CAFF,CADF;AAiBD","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport AsyncSelect from 'react-select/async';\nimport { useField } from '@unform/core';\n\nimport api from '../../../services/api';\n\nimport { Container, SelectField } from './styles';\n\nexport default function DeliverymanSelect({\n  name,\n  label,\n  placeholder,\n  loadOptions,\n  defaultOptions,\n  ...rest\n}) {\n  const [deliverymans, setDeliverymans] = useState([]);\n  const selectRef = useRef(null);\n  const { registerField, defaultValue, fieldName } = useField(name);\n\n  useEffect(() => {\n    async function loadData() {\n      const response = await api.get('/deliveryman');\n\n      const data = response.data.map(deliveryman => ({\n        value: deliveryman.id,\n        label: deliveryman.name,\n      }));\n\n      setDeliverymans(data);\n    }\n\n    loadData();\n  }, []);\n\n  useEffect(() => {\n    registerField({\n      name: fieldName,\n      ref: selectRef.current,\n      path: 'select.state.value',\n      getValue: ref => {\n        return ref.select.state.value.value;\n      },\n    });\n  }, [fieldName, registerField, rest.isMulti]);\n\n  return (\n    <Container>\n      <label htmlFor={selectRef}>{label}</label>\n      <SelectField>\n        <AsyncSelect\n          cacheOptions\n          defaultOptions={deliverymans}\n          defaultValue={defaultValue}\n          ref={selectRef}\n          classNamePrefix=\"react-select\"\n          loadOptions\n          placeholder={placeholder}\n          {...rest}\n        />\n      </SelectField>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}